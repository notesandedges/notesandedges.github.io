<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>notes&edges</title>
    <link rel="stylesheet" type="text/css" href="/css/base.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <style>
        /* Previous styles remain unchanged */
        
        #network-container {
            width: 100%;
            height: 600px;
            margin-top: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .node {
            fill: #69b3a2;
            stroke: #fff;
            stroke-width: 2px;
        }
        
        .link {
            stroke: #999;
            stroke-opacity: 0.6;
        }
        
        .node-label {
            font-size: 12px;
            font-family: sans-serif;
        }
        
        .tooltip {
            position: absolute;
            background-color: white;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            pointer-events: none;
            opacity: 0;
        }
    </style>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div class="headers" style="clear: both">
        <h1 style="float: left"><a href=index.html>notes&edges</a></h1>
        <div class="tiny">
		<h3 style="float: right"><a href="index.html">Home</a>&nbsp;&nbsp;&nbsp;
			<a href="manuscriptor.html">Manuscriptor</a>&nbsp;&nbsp;&nbsp;
			<a href="thoughts.html">Thoughts</a>&nbsp;&nbsp;&nbsp;
			<a href="https://github.com/notesandedges/notesandedges.github.io">Github</a></h3>
        </div>
    </div>

	<div class="text">
		<p> I am a PhD gaduate from the University of California, San Diego. My thesis focused on multiscale 
			intracellular electrical and electrochemical sensing of neuronal networks and cardiac monolayers.
			My focus is using subcellular biosensors to elucide mechanisms of disease within electrically active tissue,
			and to ultimately develop affordable clinical biosensors to increase global healthcare accessibility.
		</p>
		<br>
		<p> <a href="https://drive.google.com/file/d/1fZSccGt6W7G3B9H_Qr4O9hw2-ufMquOr/view?usp=sharing">CV</a>, 
			<a href="https://drive.google.com/file/d/185Z3D17CCJN-ympuGZv2zkl6proRfy-X/view?usp=sharing">Resume</a>,
			<a href="mailto:srshukla@ucsd.edu">Email</a>,
			<a href="https://www.linkedin.com/in/srshukla">Linkedin</a>
		</p>
		<br>
		<br>
		<h2>Research Network</h2>
        <p>Interactive visualization of semantic relationships between my publications:</p>
        <div id="network-container"></div>
    </div>

    <script>
        // Network visualization code
        const width = document.getElementById('network-container').offsetWidth;
        const height = 600;

        const svg = d3.select('#network-container')
            .append('svg')
            .attr('width', width)
            .attr('height', height);

        const tooltip = d3.select('body')
            .append('div')
            .attr('class', 'tooltip');

        // Load and visualize the network data
        async function visualizeNetwork() {
            try {
                const response = await fetch('https://srshukla.pythonanywhere.com/api/publication-network');
                const data = await response.json();

                const simulation = d3.forceSimulation(data.nodes)
                    .force('link', d3.forceLink(data.links).id(d => d.id))
                    .force('charge', d3.forceManyBody().strength(-400))
                    .force('center', d3.forceCenter(width / 2, height / 2));

                const link = svg.append('g')
                    .selectAll('line')
                    .data(data.links)
                    .join('line')
                    .attr('class', 'link')
                    .attr('stroke-width', d => Math.sqrt(d.value) * 2);

                const node = svg.append('g')
                    .selectAll('circle')
                    .data(data.nodes)
                    .join('circle')
                    .attr('class', 'node')
                    .attr('r', 8)
                    .call(drag(simulation));

                const label = svg.append('g')
                    .selectAll('text')
                    .data(data.nodes)
                    .join('text')
                    .attr('class', 'node-label')
                    .text(d => d.title.substring(0, 30) + '...')
                    .attr('dx', 12)
                    .attr('dy', 4);

                node.on('mouseover', (event, d) => {
                    tooltip.transition()
                        .duration(200)
                        .style('opacity', .9);
                    tooltip.html(`
                        <strong>${d.title}</strong><br/>
                        Year: ${d.year}<br/>
                        Citations: ${d.citations}
                    `)
                        .style('left', (event.pageX + 10) + 'px')
                        .style('top', (event.pageY - 28) + 'px');
                })
                .on('mouseout', () => {
                    tooltip.transition()
                        .duration(500)
                        .style('opacity', 0);
                });

                simulation.on('tick', () => {
                    link
                        .attr('x1', d => d.source.x)
                        .attr('y1', d => d.source.y)
                        .attr('x2', d => d.target.x)
                        .attr('y2', d => d.target.y);

                    node
                        .attr('cx', d => d.x)
                        .attr('cy', d => d.y);

                    label
                        .attr('x', d => d.x)
                        .attr('y', d => d.y);
                });
            } catch (error) {
                console.error('Error loading network data:', error);
            }
        }

        function drag(simulation) {
            function dragstarted(event) {
                if (!event.active) simulation.alphaTarget(0.3).restart();
                event.subject.fx = event.subject.x;
                event.subject.fy = event.subject.y;
            }

            function dragged(event) {
                event.subject.fx = event.x;
                event.subject.fy = event.y;
            }

            function dragended(event) {
                if (!event.active) simulation.alphaTarget(0);
                event.subject.fx = null;
                event.subject.fy = null;
            }

            return d3.drag()
                .on('start', dragstarted)
                .on('drag', dragged)
                .on('end', dragended);
        }

        // Initialize the visualization
        visualizeNetwork();
    </script>

    <center><h6>Copyright &copy; 2024</h6></center>
</body>
</html>
